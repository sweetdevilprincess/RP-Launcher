# RP Directory Obsolescence Audit

Comprehensive analysis of what files and patterns in `/RPs/{RP Name}/` directories are outdated, legacy, or need updating based on the new agent system.

**Date**: 2025-10-16
**Analyzed**: Example RP, Lilith and Silas RP
**Focus**: Identifying files/patterns that need updating or consolidation

---

## Executive Summary

### Current State
- **Still Relevant**: Story-specific guidance files (AUTHOR'S_NOTES.md, STORY_GENOME.md, SCENE_NOTES.md)
- **Needs Attention**: State files are inconsistently populated across RPs
- **Legacy Files**: Multiple `.txt` versions of files that now have `.json` equivalents
- **Manual Updates**: Some files appear manually maintained but should be auto-generated
- **Missing Files**: Some documented state files don't exist in older RPs
- **Outdated References**: SCENE_NOTES.md references manual commands that may not exist

---

## 1. STORY/GUIDANCE FILES (Still Current & Relevant)

### ✅ AUTHOR'S_NOTES.md
**Status**: CURRENT - Keep as-is
- Contains story-specific rules and constraints
- Critical for Claude to follow when generating responses
- Should be loaded by FileLoader TIER_1 (every response)
- No changes needed

**Example RP**: 202 lines of detailed story mechanics
**Lilith and Silas RP**: Similar comprehensive guidance

**Recommendation**: These files remain essential and should be read every response by FileLoader

---

### ✅ STORY_GENOME.md
**Status**: CURRENT - Keep as-is
- Contains intended story path, character arcs, plot structure
- Blueprint for story progression
- Helps agents understand intended narrative
- Should be loaded by FileLoader TIER_1

**Content Quality**: Well-structured with:
- Genre genome (tropes, narrative DNA)
- Thematic layers
- Intended plot structure (acts and chapters)
- Character arcs with progression
- Relationship dynamics evolution
- Intended climax and resolution

**Note**: SCENE_NOTES.md references checking if story diverged from Genome

**Recommendation**: Keep current, consider using for agent context during story generation

---

### ✅ SCENE_NOTES.md
**Status**: MOSTLY CURRENT - Minor cleanup needed
- Provides session-specific guidance
- Defines scene goals, beats, information asymmetry
- Excellent for maintaining consistency within scene

**Content Quality**: Very detailed with:
- Current scene context (time, location, present characters)
- Session goals (primary and secondary)
- Scene beats to hit
- Character focus
- Atmosphere and tone
- Dialogue patterns
- Environmental details
- Pacing notes
- Things to avoid

**⚠️ NEEDS ATTENTION**:
- Line 244: References manual updates ("After this scene: Update current_state.md...")
- These are now handled by agents automatically
- Suggestion: Add note that agents handle these updates

**Recommendation**: Keep as-is but add clarification that state files are auto-updated by agents

---

### ⚠️ CURRENT_STATUS.md
**Status**: OBSOLETE FOR MANUAL UPDATES - Should be auto-generated

**Current Content**:
```
- Last Updated: [timestamp]
- Timestamp: Unknown
- Location: Unknown
- Chapter: [Check current_state.md]
- Response Count: 32
- Progress bar
- Entity cards list
- Automation status
- Quick commands
```

**Issues**:
1. Contains placeholder fields ("Unknown", "[Check...]")
2. Quick commands listed (`/status`, `/continue`, `/endSession`, etc.) - unclear if these exist
3. Last updated timestamp is manually maintained
4. Could be auto-generated from state files

**Recommendation**:
- **Keep the concept** but auto-generate from actual state files
- Remove manual command references unless they're documented elsewhere
- This should be generated by StoryGenerator or status manager

---

## 2. LEGACY/DUPLICATE FILES (Clean Up)

### ❌ response_counter.txt
**Status**: LEGACY - Should be deleted
**Location**: `state/response_counter.txt`
**Issue**: Duplicate of `response_counter.json`

**Current State in Example RP**:
- `response_counter.json` exists (active)
- `response_counter.txt` exists (legacy)

**Action**: Delete `.txt` versions, FileManager should handle migration

**Files to Delete**:
- `state/response_counter.txt` (Example RP has this)
- `state/counter.txt` (Example RP has this - appears to be different name for same thing)

---

### ❌ response_counter.txt (or counter.txt)
**Status**: LEGACY - Should be deleted
**Location**: `state/counter.txt`
**Issue**: Another variant of response counter, should only have `.json` version

**Recommendation**: Consolidate to single response_counter.json, delete all `.txt` versions

---

### ❌ session_triggers.txt (if exists)
**Status**: LEGACY - Should be deleted
**Reference**: RP_DIRECTORY_MAP.md mentions this file
**Issue**: Should only have `session_triggers.json`

**Note**: Not found in Example RP or Lilith and Silas RP, but documented in migration patterns

---

## 3. MISSING STATE FILES (Incomplete RPs)

### Example RP Missing Files
According to RP_DIRECTORY_MAP.md, Example RP should have but doesn't:

| File | Status | Should Exist | Exists | Notes |
|------|--------|-------------|--------|-------|
| **plot_threads_master.md** | Missing | Yes | No (Example), Yes (Lilith) | Agent-generated |
| **plot_threads_archive.md** | Missing | Yes | No (Example), Yes (Lilith) | Agent-generated |
| **knowledge_base.md** | Missing | Yes | No (Example), Yes (Lilith) | Agent-generated |
| **relationship_tracker.json** | Missing | Yes | No (Example), Yes (Lilith) | Agent-generated |
| **memory_index.json** | Missing | Yes | No (Example), Yes (Lilith) | Agent-generated |
| **file_tracking.json** | Missing | Yes | No (Example), Yes (Lilith) | Agent-generated |
| **rp_client_input.json** | N/A | Yes | No | IPC file, TUI-specific |
| **rp_client_response.json** | N/A | Yes | No | IPC file, TUI-specific |
| **agent_analysis.md** | Missing | Yes | No | Agent cache file |

**Issue**: Example RP is older and hasn't generated these yet (they're auto-created by agents)

**Recommendation**: These will be created as agents run and generate content

---

## 4. FILE LOCATION CONSOLIDATION NEEDED

### Legacy Directory: `characters/`
**Status**: PARTIAL LEGACY - Needs consolidation

**Current Usage**:
- Example RP has: `characters/{{user}}.md`, `characters/Alex.md`
- Newer systems use: `entities/[CHAR] Name.md`

**Issue**: Both old and new format files exist
- Old format: `characters/{name}.md` (flexible naming)
- New format: `entities/[CHAR] {name}.md` (standardized naming with type prefix)

**Files in Example RP/characters/**:
- `{{user}}.md` (8,930 bytes - substantial)
- `Alex.md` (12,648 bytes - substantial)

**Comparison with entities/**:
- `[CHAR] Hello.md`
- `[CHAR] Howdy.md`
- `[CHAR] Sarah Mitchell.md`
- `[CHAR] What.md`

**Issues with current state**:
- Duplicate information between `characters/` and `entities/`
- Inconsistent naming convention
- FileLoader might load from wrong location
- Agents might not be updating legacy files

**Recommendation**:
1. **Short-term**: Ensure FileLoader checks both locations but prioritizes `entities/[CHAR]` format
2. **Medium-term**: Migrate old `characters/*.md` files to `entities/[CHAR] *.md` format
3. **New RPs**: Only use `entities/` with standard naming

---

## 5. NAMING CONVENTION FILES

### ❌ NAMING_CONVENTIONS.md
**Status**: MISSING from Example RP

**Found in**: Template structure but not in Example RP
**Should Contain**: Rules for entity naming, character naming, location naming, etc.

**RP_DIRECTORY_MAP references it as**:
- Read by FileLoader TIER_1 every response
- Contains naming rules for the RP

**Currently in Example RP**: Does not exist

**Recommendation**: Create template if needed, but consider if this is essential or redundant with STORY_GENOME.md and AUTHOR'S_NOTES.md

---

## 6. STRUCTURE INCONSISTENCIES

### Issue 1: Locations Directory
**Status**: Empty but structured

**Current State**:
- Directory exists: `locations/`
- Contents: Empty in both Example RP and Lilith and Silas
- Purpose: Should store location entity cards

**Recommendation**: Either populate with location entities OR consolidate to use `entities/[LOC] {name}.md` exclusively

---

### Issue 2: Sessions Directory
**Status**: Empty but structured

**Current State**:
- Directory exists: `sessions/`
- Contents: Empty
- Purpose: Unclear - for session logs?

**Recommendation**: Clarify purpose and either use or remove

---

### Issue 3: Memories Directory
**Status**: Exists but may be empty

**Current State**:
- Directory exists: `memories/`
- Contents: Possibly empty (agents should populate)
- Expected format: `{character_name}_memories.md`

**Recommendation**: Agents should be creating memory files here; verify they are doing so

---

### Issue 4: Relationships Directory
**Status**: Exists and has content

**Current State**:
- Directory exists: `relationships/`
- Contents: Should have `{character}_preferences.json` files
- Example RP: Has relationship files
- Purpose: Character preference profiles

**Recommendation**: Keep as-is, agents should maintain these files

---

## 7. MANUAL UPDATE REFERENCES (Potential Issues)

### ⚠️ SCENE_NOTES.md References (Lines 240-245)
```markdown
After this scene:
- Update current_state.md with new timestamp and location
- Note emotional shifts in character sheets
- Update story_arc.md with new developments
- Consider whether to reveal cameras to reader next session
- Plan Alex's escalation response to Sarah's intervention
```

**Issue**: These are now handled by:
- **current_state.md**: Should be auto-updated by agents (if agents are doing this)
- **story_arc.md**: Auto-generated by StoryGenerator every 50 responses
- Character development tracking: Should be in agent analysis

**Status Check Needed**: Are agents actually updating these files?

**Recommendation**:
- Verify agents are updating state files
- Add note to SCENE_NOTES.md: "State files are automatically updated by agents"
- Remove manual update checklist (or mark as reference only)

---

## 8. TIER LOADING CONSISTENCY

### FileLoader TIER_1 (Every Response) - Should Load:
According to RP_DIRECTORY_MAP and SYSTEM_ARCHITECTURE:
- `AUTHOR'S_NOTES.md` ✅ (confirmed to exist in Example RP)
- `STORY_GENOME.md` ✅ (confirmed to exist)
- `NAMING_CONVENTIONS.md` ⚠️ (missing from Example RP)
- `SCENE_NOTES.md` ✅ (confirmed to exist)
- `state/current_state.md` ✅ (exists but template)
- `state/story_arc.md` ✅ (exists but template)
- `characters/{{user}}.md` ✅ (exists - legacy location)
- `chapters/` (first file) ✅ (directory exists)

**Finding**: Most TIER_1 files exist, but:
- NAMING_CONVENTIONS.md missing (should it be mandatory?)
- current_state.md and story_arc.md are templates, not populated
- {{user}}.md in legacy location (should move to entities/)

---

## 9. AUTOMATION CONFIG ALIGNMENT

### Example RP automation_config.json:
```json
{
  "auto_entity_cards": true,
  "entity_mention_threshold": 2,
  "auto_story_arc": true,
  "arc_frequency": 50,
  "auto_memory_update": true,
  "memory_frequency": 15,
  "tiered_loading": {
    "enabled": true,
    "tier2_frequency": 4,
    "tier3_escalation_threshold": 3,
    "tier3_escalation_window": 10
  }
}
```

**Status**: Configuration is present and reasonable

**Verification Needed**:
- Are these features actually enabled in the agent system?
- Do agents respect these thresholds?
- Is memory auto-update working?

---

## 10. IPC FILE LOCATION (TUI-Specific)

### Current State
- Documentation mentions: `state/rp_client_input.json`, `state/rp_client_response.json`, flags
- Example RP state/: No IPC files found
- Expected: Only present when TUI is running

**Status**: Expected behavior (these are runtime files)

**Recommendation**: No action needed - these are created during TUI sessions

---

## Summary Table: File Status Overview

| File/Directory | Example RP | Lilith & Silas | Status | Action |
|---|---|---|---|---|
| AUTHOR'S_NOTES.md | ✅ | ✅ | Current | Keep |
| STORY_GENOME.md | ✅ | ✅ | Current | Keep |
| SCENE_NOTES.md | ✅ | ✅ | Current | Keep (update references) |
| NAMING_CONVENTIONS.md | ❌ | ? | Missing | Create or clarify necessity |
| Example RP.md | ✅ | ? | Current | Keep |
| CURRENT_STATUS.md | ✅ | ? | Needs work | Auto-generate or remove |
| characters/ | ✅ (legacy) | ? | Legacy format | Migrate to entities/ |
| entities/ | ✅ (partial) | ✅ | New format | Keep and expand |
| locations/ | Empty | ? | Unclear | Consolidate or populate |
| memories/ | Empty | ? | Should populate | Agents should create |
| relationships/ | ✅ | ? | Current | Keep |
| sessions/ | Empty | ? | Unclear | Clarify purpose |
| state/*.txt | ✅ (legacy) | ? | Legacy | DELETE |
| state/*.json | ✅ (partial) | ✅ (complete) | Mixed | Ensure all present |
| state/*.md | ✅ (template) | ✅ | Template | Keep (for population by agents) |
| state/*.flag | ✅ | ? | Runtime | Keep |

---

## Recommendations by Priority

### Priority 1: IMMEDIATE CLEANUP (Low risk, high value)
- [ ] Delete all `.txt` counter files (response_counter.txt, counter.txt)
- [ ] Verify agents are creating missing state files (plot_threads, knowledge_base, etc.)
- [ ] Update SCENE_NOTES.md to clarify that state file updates are automated
- [ ] Confirm FileLoader is loading from correct locations

### Priority 2: CONSOLIDATION (Medium effort, high value)
- [ ] Migrate `characters/*.md` files to `entities/[CHAR] *.md` format
- [ ] Clarify and consolidate `locations/` directory (use entities/ or remove)
- [ ] Remove or populate `sessions/` directory (clarify purpose)
- [ ] Decide on NAMING_CONVENTIONS.md (keep, create template, or make optional)

### Priority 3: AUTOMATION VERIFICATION (Medium effort)
- [ ] Verify agents are updating state files correctly
- [ ] Verify CURRENT_STATUS.md can be auto-generated
- [ ] Confirm automation_config settings are being respected
- [ ] Test full agent pipeline for file creation

### Priority 4: STANDARDIZATION (Ongoing)
- [ ] Update initialize_rp.py to create all state files mentioned in RP_DIRECTORY_MAP
- [ ] Add NAMING_CONVENTIONS.md to startup template if needed
- [ ] Ensure new RPs use `entities/` format from start
- [ ] Document which files are auto-generated vs. manual

---

## New RPs vs. Old RPs

### Example RP (Older)
- Uses mixed format (characters/ + entities/)
- Missing some new state files
- Has legacy `.txt` files
- Mostly manual maintenance reference

### Lilith and Silas RP (Newer)
- Has all documented state files
- Follows new `entities/[CHAR]` naming
- No legacy `.txt` files (apparently cleaned up)
- Better aligned with agent system

**Recommendation**: Use Lilith and Silas structure as template for new RPs

---

## Potential Agent System Improvements

### 1. State File Creation
**Issue**: Agents should be creating certain state files but they may not exist yet
**Solution**: Initialize all state files during RP setup, even if empty

### 2. Character Sheet Auto-update
**Issue**: SCENE_NOTES.md references "note emotional shifts in character sheets"
**Solution**: Add agent to track character development changes

### 3. Legacy Format Migration
**Issue**: Old characters/ format may not be read by current agents
**Solution**: FileManager should auto-migrate on read, or agents should handle both formats

### 4. CURRENT_STATUS.md Generation
**Issue**: Current file has placeholders and manual commands
**Solution**: Auto-generate from actual state files

---

## Conclusion

The RP directory structure is mostly sound but shows signs of evolution:

**Still Works Well**:
- Story-specific guidance files (AUTHOR'S_NOTES, STORY_GENOME, SCENE_NOTES)
- Entity-based system emerging
- State file structure comprehensively documented

**Needs Attention**:
- Legacy `.txt` files should be deleted
- Old `characters/` format should be consolidated to `entities/`
- Older RPs (Example RP) are missing some state files (but these should be auto-created by agents)
- Manual update references in SCENE_NOTES.md should be clarified as automated
- CURRENT_STATUS.md could be auto-generated or have fields auto-populated

**Ready for Agents**:
- Core documentation is comprehensive
- Automation config is in place
- File structure supports agent operations

**Recommended Next Steps**:
1. Clean up legacy files (Priority 1)
2. Verify agent file creation (Priority 3)
3. Consolidate naming schemes (Priority 2)
4. Update documentation references (Priority 4)

---

**Last Updated**: 2025-10-16
**Status**: Complete audit for decision-making

For implementation details, refer to:
- [RP_DIRECTORY_MAP.md](RP_DIRECTORY_MAP.md) - Complete reference
- [SYSTEM_ARCHITECTURE.md](../Working Guides/SYSTEM_ARCHITECTURE.md) - System design
- [AGENT_DOCUMENTATION.md](../Working Guides/AGENT_DOCUMENTATION.md) - Agent system
